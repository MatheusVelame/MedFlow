<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report.xsd" version="3.0.2" name="io.cucumber.junit.platform.engine.CucumberTestEngine" time="0.155" tests="18" errors="0" skipped="0" failures="0">
  <properties>
    <property name="java.specification.version" value="25"/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="java.class.path" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/test-classes:/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/classes:/Users/paulorago/.m2/repository/commons-validator/commons-validator/1.9.0/commons-validator-1.9.0.jar:/Users/paulorago/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/Users/paulorago/.m2/repository/commons-digester/commons-digester/2.1/commons-digester-2.1.jar:/Users/paulorago/.m2/repository/commons-logging/commons-logging/1.3.2/commons-logging-1.3.2.jar:/Users/paulorago/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-java/7.21.1/cucumber-java-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-core/7.21.1/cucumber-core-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-gherkin/7.21.1/cucumber-gherkin-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-gherkin-messages/7.21.1/cucumber-gherkin-messages-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/gherkin/31.0.0/gherkin-31.0.0.jar:/Users/paulorago/.m2/repository/io/cucumber/messages/27.2.0/messages-27.2.0.jar:/Users/paulorago/.m2/repository/io/cucumber/testng-xml-formatter/0.3.1/testng-xml-formatter-0.3.1.jar:/Users/paulorago/.m2/repository/io/cucumber/query/13.2.0/query-13.2.0.jar:/Users/paulorago/.m2/repository/io/cucumber/tag-expressions/6.1.2/tag-expressions-6.1.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-expressions/18.0.1/cucumber-expressions-18.0.1.jar:/Users/paulorago/.m2/repository/io/cucumber/datatable/7.21.1/datatable-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-plugin/7.21.1/cucumber-plugin-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/docstring/7.21.1/docstring-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/html-formatter/21.9.0/html-formatter-21.9.0.jar:/Users/paulorago/.m2/repository/io/cucumber/junit-xml-formatter/0.7.1/junit-xml-formatter-0.7.1.jar:/Users/paulorago/.m2/repository/io/cucumber/ci-environment/10.0.1/ci-environment-10.0.1.jar:/Users/paulorago/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-junit-platform-engine/7.21.1/cucumber-junit-platform-engine-7.21.1.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-engine/1.11.4/junit-platform-engine-1.11.4.jar:/Users/paulorago/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-commons/1.11.4/junit-platform-commons-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter/5.11.4/junit-jupiter-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.11.4/junit-jupiter-api-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.11.4/junit-jupiter-params-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.11.4/junit-jupiter-engine-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite/1.11.4/junit-platform-suite-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-api/1.11.4/junit-platform-suite-api-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-engine/1.11.4/junit-platform-suite-engine-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-commons/1.11.4/junit-platform-suite-commons-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-launcher/1.11.4/junit-platform-launcher-1.11.4.jar:/Users/paulorago/.m2/repository/org/apache/commons/commons-lang3/3.17.0/commons-lang3-3.17.0.jar:"/>
    <property name="java.vm.vendor" value="Homebrew"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="java.vendor.url" value="https://github.com/Homebrew/homebrew-core/issues"/>
    <property name="user.timezone" value="America/Recife"/>
    <property name="os.name" value="Mac OS X"/>
    <property name="java.vm.specification.version" value="25"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="user.country" value="BR"/>
    <property name="sun.boot.library.path" value="/opt/homebrew/Cellar/openjdk/25/libexec/openjdk.jdk/Contents/Home/lib"/>
    <property name="sun.java.command" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/surefire/surefirebooter-20251019232210035_3.jar /Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/surefire 2025-10-19T23-22-09_997-jvmRun1 surefire-20251019232210035_1tmp surefire_0-20251019232210035_2tmp"/>
    <property name="http.nonProxyHosts" value="local|*.local|169.254/16|*.169.254/16"/>
    <property name="jdk.debug" value="release"/>
    <property name="test" value="com.medflow.dominio.prontuario.RunCucumberTest"/>
    <property name="surefire.test.class.path" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/test-classes:/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/classes:/Users/paulorago/.m2/repository/commons-validator/commons-validator/1.9.0/commons-validator-1.9.0.jar:/Users/paulorago/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/Users/paulorago/.m2/repository/commons-digester/commons-digester/2.1/commons-digester-2.1.jar:/Users/paulorago/.m2/repository/commons-logging/commons-logging/1.3.2/commons-logging-1.3.2.jar:/Users/paulorago/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-java/7.21.1/cucumber-java-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-core/7.21.1/cucumber-core-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-gherkin/7.21.1/cucumber-gherkin-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-gherkin-messages/7.21.1/cucumber-gherkin-messages-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/gherkin/31.0.0/gherkin-31.0.0.jar:/Users/paulorago/.m2/repository/io/cucumber/messages/27.2.0/messages-27.2.0.jar:/Users/paulorago/.m2/repository/io/cucumber/testng-xml-formatter/0.3.1/testng-xml-formatter-0.3.1.jar:/Users/paulorago/.m2/repository/io/cucumber/query/13.2.0/query-13.2.0.jar:/Users/paulorago/.m2/repository/io/cucumber/tag-expressions/6.1.2/tag-expressions-6.1.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-expressions/18.0.1/cucumber-expressions-18.0.1.jar:/Users/paulorago/.m2/repository/io/cucumber/datatable/7.21.1/datatable-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-plugin/7.21.1/cucumber-plugin-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/docstring/7.21.1/docstring-7.21.1.jar:/Users/paulorago/.m2/repository/io/cucumber/html-formatter/21.9.0/html-formatter-21.9.0.jar:/Users/paulorago/.m2/repository/io/cucumber/junit-xml-formatter/0.7.1/junit-xml-formatter-0.7.1.jar:/Users/paulorago/.m2/repository/io/cucumber/ci-environment/10.0.1/ci-environment-10.0.1.jar:/Users/paulorago/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/Users/paulorago/.m2/repository/io/cucumber/cucumber-junit-platform-engine/7.21.1/cucumber-junit-platform-engine-7.21.1.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-engine/1.11.4/junit-platform-engine-1.11.4.jar:/Users/paulorago/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-commons/1.11.4/junit-platform-commons-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter/5.11.4/junit-jupiter-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.11.4/junit-jupiter-api-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.11.4/junit-jupiter-params-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.11.4/junit-jupiter-engine-5.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite/1.11.4/junit-platform-suite-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-api/1.11.4/junit-platform-suite-api-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-engine/1.11.4/junit-platform-suite-engine-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-suite-commons/1.11.4/junit-platform-suite-commons-1.11.4.jar:/Users/paulorago/.m2/repository/org/junit/platform/junit-platform-launcher/1.11.4/junit-platform-launcher-1.11.4.jar:/Users/paulorago/.m2/repository/org/apache/commons/commons-lang3/3.17.0/commons-lang3-3.17.0.jar:"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="/Users/paulorago"/>
    <property name="user.language" value="pt"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.version.date" value="2025-09-16"/>
    <property name="java.home" value="/opt/homebrew/Cellar/openjdk/25/libexec/openjdk.jdk/Contents/Home"/>
    <property name="file.separator" value="/"/>
    <property name="basedir" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento"/>
    <property name="java.vm.compressedOopsMode" value="Zero based"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="apple.awt.application.name" value="ForkedBooter"/>
    <property name="surefire.real.class.path" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento/target/surefire/surefirebooter-20251019232210035_3.jar"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="ftp.nonProxyHosts" value="local|*.local|169.254/16|*.169.254/16"/>
    <property name="java.runtime.version" value="25"/>
    <property name="user.name" value="paulorago"/>
    <property name="stdout.encoding" value="UTF-8"/>
    <property name="path.separator" value=":"/>
    <property name="os.version" value="15.6.1"/>
    <property name="java.runtime.name" value="OpenJDK Runtime Environment"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.vm.name" value="OpenJDK 64-Bit Server VM"/>
    <property name="java.vendor.version" value="Homebrew"/>
    <property name="localRepository" value="/Users/paulorago/.m2/repository"/>
    <property name="java.vendor.url.bug" value="https://github.com/Homebrew/homebrew-core/issues"/>
    <property name="java.io.tmpdir" value="/var/folders/n0/dc5hw0cd1hvb90bgm7t0j4180000gn/T/"/>
    <property name="java.version" value="25"/>
    <property name="user.dir" value="/Users/paulorago/Repositories /MedFlow/dominio-atendimento"/>
    <property name="os.arch" value="aarch64"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="native.encoding" value="UTF-8"/>
    <property name="java.library.path" value="/Users/paulorago/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:."/>
    <property name="java.vm.info" value="mixed mode, sharing"/>
    <property name="stderr.encoding" value="UTF-8"/>
    <property name="java.vendor" value="Homebrew"/>
    <property name="java.vm.version" value="25"/>
    <property name="stdin.encoding" value="UTF-8"/>
    <property name="sun.io.unicode.encoding" value="UnicodeBig"/>
    <property name="socksNonProxyHosts" value="local|*.local|169.254/16|*.169.254/16"/>
    <property name="java.class.version" value="69.0"/>
    <property name="maven.test.failure.ignore" value="true"/>
  </properties>
  <testcase name="RN1 - Arquivar prontuário com permissão administrativa (sucesso)" classname="Arquivar ou excluir prontuários" time="0.048">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ArquivarProntuario)
Scenario: RN1 - Arquivar prontuário com permissão administrativa (sucesso) &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:9&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1001"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-001"&amp#27;[0m               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ana Lima"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Administrador do Sistema"&amp#27;[0m         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo do arquivamento é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Inatividade superior a 5 anos"&amp#27;[0m           &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_do_arquivamento_é(java.lang.String)&amp#27;[0m
Status antes do arquivamento: ATIVO
Status após arquivamento: ARQUIVADO
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma usuária arquivar o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1001"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:05"&amp#27;[0m    &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_usuária_arquivar_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo estado do prontuário deve mudar para &amp#27;[0m&amp#27;[32m&amp#27;[1m"Arquivado"&amp#27;[0m                  &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_estado_do_prontuário_deve_mudar_para(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário não deve aparecer em consultas comuns&amp#27;[0m                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_não_deve_aparecer_em_consultas_comuns()&amp#27;[0m
]]></system-out>
    <system-err><![CDATA[out. 19, 2025 11:22:10 PM io.cucumber.junit.platform.engine.DiscoverySelectorResolver warnWhenCucumberFeaturesPropertyIsUsed
ADVERTÊNCIA: Discovering tests using the cucumber.features property. Other discovery selectors are ignored!

This is a work around for the limited JUnit 5 support in Maven and Gradle. Please request/upvote/sponsor/ect better support for JUnit 5 discovery selectors. For details see: https://github.com/cucumber/cucumber-jvm/pull/2498

If you are using the JUnit 5 Suite Engine, Platform Launcher API or Console Launcher you should not use this property. Please consult the JUnit 5 documentation on test selection.
]]></system-err>
  </testcase>
  <testcase name="RN1 - Bloquear exclusão por usuário sem permissão (falha)" classname="Arquivar ou excluir prontuários" time="0.008">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ExcluirProntuario)
Scenario: RN1 - Bloquear exclusão por usuário sem permissão (falha)                 &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:20&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1002"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-002"&amp#27;[0m                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Beatriz Melo"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Atendente"&amp#27;[0m                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo informado é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Limpeza de dados"&amp#27;[0m                                       &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_informado_é(java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma usuária tentar excluir o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1002"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:20"&amp#27;[0m       &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_usuária_tentar_excluir_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve negar a ação informando &amp#27;[0m&amp#27;[32m&amp#27;[1m"permissão administrativa necessária"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_negar_a_ação_informando(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnenhum arquivamento ou exclusão deve ocorrer&amp#27;[0m                                  &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.nenhum_arquivamento_ou_exclusão_deve_ocorrer()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN2 - Rejeitar ação quando motivo não for informado (falha)" classname="Arquivar ou excluir prontuários" time="0.005">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ArquivarProntuario)
Scenario: RN2 - Rejeitar ação quando motivo não for informado (falha)          &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:32&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1200"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-020"&amp#27;[0m                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ana Lima"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Administrador do Sistema"&amp#27;[0m             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo não foi informado&amp#27;[0m                                               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_não_foi_informado()&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma usuária tentar arquivar o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1200"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:35"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_usuária_tentar_arquivar_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve rejeitar a operação informando &amp#27;[0m&amp#27;[32m&amp#27;[1m"motivo é obrigatório"&amp#27;[0m    &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_rejeitar_a_operação_informando(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário deve permanecer &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ativo"&amp#27;[0m                                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_deve_permanecer(java.lang.String)&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN3 - Arquivar mantém registro fora de consultas comuns e preservado em base segura (sucesso)" classname="Arquivar ou excluir prontuários" time="0.008">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ArquivarProntuario)
Scenario: RN3 - Arquivar mantém registro fora de consultas comuns e preservado em base segura (sucesso) &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:43&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1300"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-030"&amp#27;[0m&amp#27;[32m em estado &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ativo"&amp#27;[0m                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente_em_estado(java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Mariana Reis"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Administrador do Sistema"&amp#27;[0m                                  &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo do arquivamento é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Inatividade superior a 5 anos"&amp#27;[0m                                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_do_arquivamento_é(java.lang.String)&amp#27;[0m
Status antes do arquivamento: ATIVO
Status após arquivamento: ARQUIVADO
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma usuária arquivar o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1300"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:45"&amp#27;[0m                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_usuária_arquivar_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo prontuário não deve aparecer nas consultas comuns&amp#27;[0m                                              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_não_deve_aparecer_nas_consultas_comuns()&amp#27;[0m
Status atual do prontuário: ARQUIVADO
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário deve estar disponível na base segura de arquivados&amp#27;[0m                                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_deve_estar_disponível_na_base_segura_de_arquivados()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN3 - Impedir exibição de arquivados em consultas comuns (falha de acesso)" classname="Arquivar ou excluir prontuários" time="0.005">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @query(ListarProntuarios)
Scenario: RN3 - Impedir exibição de arquivados em consultas comuns (falha de acesso)       &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:54&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mo prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1300"&amp#27;[0m&amp#27;[32m está em estado &amp#27;[0m&amp#27;[32m&amp#27;[1m"Arquivado"&amp#27;[0m                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_está_em_estado(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Operador"&amp#27;[0m&amp#27;[32m realiza uma consulta comum de prontuários às &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 11:00"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_realiza_uma_consulta_comum_de_prontuários_às(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma listagem padrão for retornada&amp#27;[0m                                                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_listagem_padrão_for_retornada()&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1300"&amp#27;[0m&amp#27;[32m não deve constar na listagem&amp#27;[0m                                &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_não_deve_constar_na_listagem(java.lang.String)&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN4 - Excluir com autorização legal e destruição lógica irreversível (sucesso)" classname="Arquivar ou excluir prontuários" time="0.004">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ExcluirProntuario)
Scenario: RN4 - Excluir com autorização legal e destruição lógica irreversível (sucesso)                               &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:63&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-2001"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-040"&amp#27;[0m                                                           &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mhá parecer jurídico anexado autorizando exclusão por &amp#27;[0m&amp#27;[32m&amp#27;[1m"erro cadastral grave"&amp#27;[0m&amp#27;[32m conforme norma aplicável&amp#27;[0m             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.há_parecer_jurídico_anexado_autorizando_exclusão_por_conforme_norma_aplicável(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Carlos Souza"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Administrador do Sistema"&amp#27;[0m                                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo da exclusão é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Erro cadastral grave confirmado pela auditoria"&amp#27;[0m                                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_da_exclusão_é(java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32mo usuário excluir o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-2001"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 11:10"&amp#27;[0m                                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_excluir_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve realizar exclusão irreversível marcada como &amp#27;[0m&amp#27;[32m&amp#27;[1m"destruição lógica"&amp#27;[0m&amp#27;[32m sem possibilidade de restauração&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_realizar_exclusão_irreversível_marcada_como_sem_possibilidade_de_restauração(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mse exigido pela LGPD, realizar deleção definitiva dos dados pessoais&amp#27;[0m                                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.se_exigido_pela_lgpd_realizar_deleção_definitiva_dos_dados_pessoais()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN4 - Negar exclusão sem autorização legal (falha)" classname="Arquivar ou excluir prontuários" time="0.005">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(ExcluirProntuario)
Scenario: RN4 - Negar exclusão sem autorização legal (falha)                               &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/arquivamento_exclusao_prontuario.feature:75&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-2002"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-050"&amp#27;[0m                               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_prontuário_do_paciente(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnão há documentação jurídica que autorize a exclusão&amp#27;[0m                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.não_há_documentação_jurídica_que_autorize_a_exclusão()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ana Lima"&amp#27;[0m&amp#27;[32m possui papel &amp#27;[0m&amp#27;[32m&amp#27;[1m"Administrador do Sistema"&amp#27;[0m                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_possui_papel(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo motivo da exclusão é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Limpeza de base"&amp#27;[0m                                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_motivo_da_exclusão_é(java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma usuária tentar excluir o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-2002"&amp#27;[0m&amp#27;[32m em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 11:15"&amp#27;[0m              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_usuária_tentar_excluir_o_prontuário_em(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve negar a operação informando &amp#27;[0m&amp#27;[32m&amp#27;[1m"exclusão somente com autorização legal"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_negar_a_operação_informando(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário deve permanecer inalterado&amp#27;[0m                                              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_deve_permanecer_inalterado()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="Sucesso — Atualizar prontuário em atendimento ativo (versão e histórico)" classname="Atualização do prontuário de um paciente a cada atendimento" time="0.008">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(AtualizarProntuario)
Scenario: Sucesso — Atualizar prontuário em atendimento ativo (versão e histórico)                                 &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/atualizacao_prontuario.feature:9&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mo paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-001"&amp#27;[0m&amp#27;[32m está em atendimento &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m&amp#27;[32m iniciado em &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025"&amp#27;[0m&amp#27;[32m às &amp#27;[0m&amp#27;[32m&amp#27;[1m"09:30"&amp#27;[0m                    &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_paciente_está_em_atendimento_iniciado_em_às(java.lang.String,java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1001"&amp#27;[0m&amp#27;[32m está vinculado ao atendimento &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m&amp#27;[32m com status &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ativo"&amp#27;[0m                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_está_vinculado_ao_atendimento_com_status(java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional responsável é &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Ana Lima"&amp#27;[0m&amp#27;[32m (CRM &amp#27;[0m&amp#27;[32m&amp#27;[1m12345&amp#27;[0m&amp#27;[32m)&amp#27;[0m                                                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_responsável_é_crm(java.lang.String,java.lang.Integer)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma médica registrar uma atualização às &amp#27;[0m&amp#27;[32m&amp#27;[1m"10:05"&amp#27;[0m&amp#27;[32m com observações &amp#27;[0m&amp#27;[32m&amp#27;[1m"Evolução favorável, PA 12x8, ajuste de dose"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_médica_registrar_uma_atualização_às_com_observações(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve criar uma nova versão do prontuário vinculada ao atendimento &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m                      &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_criar_uma_nova_versão_do_prontuário_vinculada_ao_atendimento(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mmanter as versões anteriores preservadas (imutáveis)&amp#27;[0m                                                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.manter_as_versões_anteriores_preservadas_imutáveis()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mmanter o status do registro como &amp#27;[0m&amp#27;[32m&amp#27;[1m"Ativo"&amp#27;[0m                                                                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.manter_o_status_do_registro_como(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mincluir a atualização no histórico consultável (data/hora, profissional, resumo da evolução)&amp#27;[0m                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.incluir_a_atualização_no_histórico_consultável_data_hora_profissional_resumo_da_evolução()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="Falha — Tentativa de atualização sem vínculo de atendimento válido" classname="Atualização do prontuário de um paciente a cada atendimento" time="0.004">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(AtualizarProntuario)
Scenario: Falha — Tentativa de atualização sem vínculo de atendimento válido                                             &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/atualizacao_prontuario.feature:22&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dr. Carlos Souza"&amp#27;[0m&amp#27;[32m tenta atualizar o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-2002"&amp#27;[0m&amp#27;[32m do paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-010"&amp#27;[0m                  &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_tenta_atualizar_o_prontuário_do_paciente(java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnão há atendimento ativo vinculado (ID do atendimento ausente ou encerrado)&amp#27;[0m                                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.não_há_atendimento_ativo_vinculado_id_do_atendimento_ausente_ou_encerrado()&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32mo médico registrar a atualização às &amp#27;[0m&amp#27;[32m&amp#27;[1m"10:20"&amp#27;[0m&amp#27;[32m com observações &amp#27;[0m&amp#27;[32m&amp#27;[1m"Novo sintoma relatado: cefaleia"&amp#27;[0m                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_médico_registrar_a_atualização_às_com_observações(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve impedir a atualização informando que cada atualização deve estar vinculada a um atendimento válido&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_impedir_a_atualização_informando_que_cada_atualização_deve_estar_vinculada_a_um_atendimento_válido()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnenhum registro de versão deve ser criado&amp#27;[0m                                                                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.nenhum_registro_de_versão_deve_ser_criado()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="Finalização do atendimento inativa o registro e bloqueia novas entradas" classname="Atualização do prontuário de um paciente a cada atendimento" time="0.003">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @command(FinalizarAtendimento)
Scenario: Finalização do atendimento inativa o registro e bloqueia novas entradas                                                     &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/atualizacao_prontuario.feature:32&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mo paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-001"&amp#27;[0m&amp#27;[32m possui o prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1001"&amp#27;[0m&amp#27;[32m com atualizações vinculadas ao atendimento &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m                     &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_paciente_possui_o_prontuário_com_atualizações_vinculadas_ao_atendimento(java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Ana Lima"&amp#27;[0m&amp#27;[32m solicita a finalização do atendimento às &amp#27;[0m&amp#27;[32m&amp#27;[1m"10:40"&amp#27;[0m                                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_solicita_a_finalização_do_atendimento_às(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32mo atendimento &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m&amp#27;[32m for finalizado&amp#27;[0m                                                                                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_atendimento_for_finalizado(java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve alterar o status das atualizações daquele atendimento para &amp#27;[0m&amp#27;[32m&amp#27;[1m"Inativado"&amp#27;[0m                                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_alterar_o_status_das_atualizações_daquele_atendimento_para(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo prontuário permanece consultável (histórico preservado), porém novas atualizações não podem ser adicionadas nesse atendimento&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_permanece_consultável_histórico_preservado_porém_novas_atualizações_não_podem_ser_adicionadas_nesse_atendimento()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mpara registrar novas evoluções, o sistema deve exigir a abertura de novo atendimento (nova vinculação)&amp#27;[0m                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.para_registrar_novas_evoluções_o_sistema_deve_exigir_a_abertura_de_novo_atendimento_nova_vinculação()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="Consulta do histórico completo (linhas do tempo por atendimento e versão)" classname="Atualização do prontuário de um paciente a cada atendimento" time="0.005">
    <system-out><![CDATA[
@boundedcontext(Prontuario) @aggregate(Prontuario) @query(ConsultarHistorico)
Scenario: Consulta do histórico completo (linhas do tempo por atendimento e versão)                                                                             &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/atualizacao_prontuario.feature:43&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mo prontuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"PRT-1001"&amp#27;[0m&amp#27;[32m possui múltiplas versões vinculadas aos atendimentos &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1001"&amp#27;[0m&amp#27;[32m e &amp#27;[0m&amp#27;[32m&amp#27;[1m"ATD-1020"&amp#27;[0m                                                    &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_prontuário_possui_múltiplas_versões_vinculadas_aos_atendimentos_e(java.lang.String,java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo usuário &amp#27;[0m&amp#27;[32m&amp#27;[1m"Mariana Reis"&amp#27;[0m&amp#27;[32m (perfil permitido) solicita a visualização do histórico às &amp#27;[0m&amp#27;[32m&amp#27;[1m"11:00"&amp#27;[0m                                                               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_usuário_perfil_permitido_solicita_a_visualização_do_histórico_às(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32mo histórico do prontuário for consultado&amp#27;[0m                                                                                                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_histórico_do_prontuário_for_consultado()&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve exibir a linha do tempo de evoluções em ordem cronológica, agrupadas por atendimento (ID do atendimento, data/hora, profissional, resumo)&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_exibir_a_linha_do_tempo_de_evoluções_em_ordem_cronológica_agrupadas_por_atendimento_id_do_atendimento_data_hora_profissional_resumo()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mcada versão anterior deve estar acessível em modo somente leitura, garantindo a imutabilidade&amp#27;[0m                                                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.cada_versão_anterior_deve_estar_acessível_em_modo_somente_leitura_garantindo_a_imutabilidade()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mdeve ser possível filtrar por atendimento, período e profissional responsável&amp#27;[0m                                                                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.deve_ser_possível_filtrar_por_atendimento_período_e_profissional_responsável()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN1 - Registrar histórico com todos os campos obrigatórios (sucesso)" classname="Registro de histórico clínico do paciente" time="0.007">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @command(RegistrarHistorico)
Scenario: RN1 - Registrar histórico com todos os campos obrigatórios (sucesso)        &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:9&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-001"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Ana Lima"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Médico"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-001
Sintomas: febre e mialgia
Diagnóstico: febre e mialgia
Conduta: febre e mialgia
Histórico clínico criado com sucesso: HIS-1760926930505
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional registrar um histórico clínico às &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:15"&amp#27;[0m&amp#27;[32m com:&amp#27;[0m       &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_registrar_um_histórico_clínico_às_com(java.lang.String,io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | febre e mialgia                    |
    | diagnostico | Influenza                          |
    | conduta     | Oseltamivir 75mg 2x/dia por 5 dias |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve criar um novo registro imutável vinculado ao paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-001"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_criar_um_novo_registro_imutável_vinculado_ao_paciente(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo histórico do paciente deve exibir o novo registro em ordem cronológica&amp#27;[0m        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_histórico_do_paciente_deve_exibir_o_novo_registro_em_ordem_cronológica()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN1 - Rejeitar registro quando faltar campo obrigatório (falha)" classname="Registro de histórico clínico do paciente" time="0.004">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @command(RegistrarHistorico)
Scenario: RN1 - Rejeitar registro quando faltar campo obrigatório (falha)              &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:22&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-002"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enf. Carlos"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enfermeiro"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-002
Sintomas: tosse seca
Diagnóstico: null
Conduta: sintomáticos e repouso
ERRO: Diagnóstico vazio
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32mo profissional tentar registrar um histórico clínico às &amp#27;[0m&amp#27;[32m&amp#27;[1m"21/09/2025 10:25"&amp#27;[0m&amp#27;[32m com:&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_tentar_registrar_um_histórico_clínico_às_com(java.lang.String,io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | tosse seca             |
    | diagnostico | [empty]                |
    | conduta     | sintomáticos e repouso |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve rejeitar o registro informando &amp#27;[0m&amp#27;[32m&amp#27;[1m"diagnóstico é obrigatório"&amp#27;[0m       &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_rejeitar_o_registro_informando(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnenhum novo registro deve ser criado&amp#27;[0m                                             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.nenhum_novo_registro_deve_ser_criado()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN2 - Registrar histórico associado a paciente previamente cadastrado (sucesso)" classname="Registro de histórico clínico do paciente" time="0.006">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @command(RegistrarHistorico)
Scenario: RN2 - Registrar histórico associado a paciente previamente cadastrado (sucesso) &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:35&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-003"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                            &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Marina"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Médico"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-003
Sintomas: dor torácica leve
Diagnóstico: dor torácica leve
Conduta: dor torácica leve
Histórico clínico criado com sucesso: HIS-1760926930515
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional registrar um histórico clínico com:&amp#27;[0m                                 &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_registrar_um_histórico_clínico_com(io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | dor torácica leve   |
    | diagnostico | Bronquite suspeita  |
    | conduta     | Broncodilatador PRN |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo registro deve ficar associado ao paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-003"&amp#27;[0m                              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_registro_deve_ficar_associado_ao_paciente(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo histórico consultável do paciente deve refletir a nova entrada&amp#27;[0m                    &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_histórico_consultável_do_paciente_deve_refletir_a_nova_entrada()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN2 - Bloquear registro para paciente inexistente (falha)" classname="Registro de histórico clínico do paciente" time="0.003">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @command(RegistrarHistorico)
Scenario: RN2 - Bloquear registro para paciente inexistente (falha)            &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:48&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mnão existe cadastro para o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-9999"&amp#27;[0m                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.não_existe_cadastro_para_o_paciente(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enf. Paula"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enfermeiro"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-9999
Sintomas: náusea e tontura
Diagnóstico: Refluxo
Conduta: Omeprazol 20mg/dia
ERRO: Paciente não encontrado: PAC-9999
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional tentar registrar um histórico clínico com:&amp#27;[0m               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_tentar_registrar_um_histórico_clínico_com(io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | náusea e tontura   |
    | diagnostico | Refluxo            |
    | conduta     | Omeprazol 20mg/dia |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve rejeitar o registro informando &amp#27;[0m&amp#27;[32m&amp#27;[1m"paciente não encontrado"&amp#27;[0m &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_rejeitar_o_registro_informando(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mnenhum registro deve ser criado&amp#27;[0m                                          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.nenhum_registro_deve_ser_criado()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN3 - Data, hora e profissional gravados automaticamente e registro imutável (sucesso)" classname="Registro de histórico clínico do paciente" time="0.003">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @Policy(AuditoriaAuto)
Scenario: RN3 - Data, hora e profissional gravados automaticamente e registro imutável (sucesso) &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:61&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-004"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enf. Luiza"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enfermeiro"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-004
Sintomas: cefaleia moderada
Diagnóstico: cefaleia moderada
Conduta: cefaleia moderada
Histórico clínico criado com sucesso: HIS-1760926930522
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional registrar um histórico clínico com PAC-004:&amp#27;[0m                                &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_registrar_um_histórico_clínico_com_pac_004(io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | cefaleia moderada    |
    | diagnostico | Enxaqueca            |
    | conduta     | Analgésico e repouso |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve gravar automaticamente data e hora da criação&amp#27;[0m                              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_gravar_automaticamente_data_e_hora_da_criação()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo sistema deve gravar automaticamente o profissional responsável &amp#27;[0m&amp#27;[32m&amp#27;[1m"Enf. Luiza"&amp#27;[0m              &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_gravar_automaticamente_o_profissional_responsável(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo registro salvo deve ser imutável, permitindo apenas adição de novos registros&amp#27;[0m            &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_registro_salvo_deve_ser_imutável_permitindo_apenas_adição_de_novos_registros()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="RN3 - Impedir sobrescrever registro e impedir definir data/profissional manualmente (falha)" classname="Registro de histórico clínico do paciente" time="0.004">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @Policy(AuditoriaAuto)
Scenario: RN3 - Impedir sobrescrever registro e impedir definir data/profissional manualmente (falha) &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:75&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-005"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                                        &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Ana Lima"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Médico"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-005
Sintomas: 20/09/2025 08:00
Diagnóstico: Dr. Terceiro
Conduta: astenia
Histórico clínico criado com sucesso: HIS-1760926930526
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional tentar salvar um histórico clínico definindo manualmente:&amp#27;[0m                       &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_tentar_salvar_um_histórico_clínico_definindo_manualmente(io.cucumber.datatable.DataTable)&amp#27;[0m
    | dataHora     | 20/09/2025 08:00 |
    | profissional | Dr. Terceiro     |
    | sintomas     | astenia          |
    | diagnostico  | Anemia leve      |
    | conduta      | Suplementação    |
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve rejeitar qualquer tentativa de sobrescrever um registro existente&amp#27;[0m               &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_rejeitar_qualquer_tentativa_de_sobrescrever_um_registro_existente()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mse for atualização, um novo registro deve ser criado mantendo o anterior inalterado&amp#27;[0m             &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.se_for_atualização_um_novo_registro_deve_ser_criado_mantendo_o_anterior_inalterado()&amp#27;[0m
]]></system-out>
  </testcase>
  <testcase name="Observação futura - Referenciar anexos para compatibilidade futura sem upload obrigatório" classname="Registro de histórico clínico do paciente" time="0.004">
    <system-out><![CDATA[
@boundedcontext(ProntuarioClinico) @aggregate(HistoricoClinico) @command(RegistrarHistorico)
Scenario: Observação futura - Referenciar anexos para compatibilidade futura sem upload obrigatório &amp#27;[90m# src/test/resources/com/medflow/dominio/prontuario/registro_historico_clinico.feature:90&amp#27;[0m
  &amp#27;[32mGiven &amp#27;[0m&amp#27;[32mexiste o paciente &amp#27;[0m&amp#27;[32m&amp#27;[1m"PAC-006"&amp#27;[0m&amp#27;[32m cadastrado&amp#27;[0m                                                      &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.existe_o_paciente_cadastrado(java.lang.String)&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo profissional &amp#27;[0m&amp#27;[32m&amp#27;[1m"Dra. Marina"&amp#27;[0m&amp#27;[32m possui perfil &amp#27;[0m&amp#27;[32m&amp#27;[1m"Médico"&amp#27;[0m&amp#27;[32m e está autorizado&amp#27;[0m                         &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_profissional_possui_perfil_e_está_autorizado(java.lang.String,java.lang.String)&amp#27;[0m
Registrando histórico clínico para paciente: PAC-006
Sintomas: dispneia leve
Diagnóstico: Asma leve
Conduta: Inalador conforme necessidade
Histórico clínico criado com sucesso: HIS-1760926930530
  &amp#27;[32mWhen &amp#27;[0m&amp#27;[32ma profissional registrar um histórico clínico com PAC-006:&amp#27;[0m                                   &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_registrar_um_histórico_clínico_com_pac_006(io.cucumber.datatable.DataTable)&amp#27;[0m
    | sintomas    | dispneia leve                 |
    | diagnostico | Asma leve                     |
    | conduta     | Inalador conforme necessidade |
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32ma profissional informar referências de anexos &amp#27;[0m&amp#27;[32m&amp#27;[1m"RX-2025-09-21"&amp#27;[0m&amp#27;[32m e &amp#27;[0m&amp#27;[32m&amp#27;[1m"laudo-espirometria"&amp#27;[0m          &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.a_profissional_informar_referências_de_anexos_e(java.lang.String,java.lang.String)&amp#27;[0m
  &amp#27;[32mThen &amp#27;[0m&amp#27;[32mo sistema deve salvar o registro clínico imutável com metadados de anexos referenciados&amp#27;[0m      &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_sistema_deve_salvar_o_registro_clínico_imutável_com_metadados_de_anexos_referenciados()&amp#27;[0m
  &amp#27;[32mAnd &amp#27;[0m&amp#27;[32mo histórico do paciente deve exibir a indicação de anexos para versões futuras&amp#27;[0m                &amp#27;[90m# com.medflow.dominio.prontuario.ProntuarioFuncionalidade.o_histórico_do_paciente_deve_exibir_a_indicação_de_anexos_para_versões_futuras()&amp#27;[0m
]]></system-out>
  </testcase>
</testsuite>